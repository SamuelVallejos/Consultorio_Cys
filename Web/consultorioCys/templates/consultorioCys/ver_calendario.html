{% extends 'consultorioCys/base_generic.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">Calendario de Citas</h2>
    <div id="calendar"></div>
</div>

<!-- Modal para mostrar citas del día -->
<div class="modal fade" id="citasModal" tabindex="-1" aria-labelledby="citasModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="citasModalLabel">Citas del Día</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <ul id="citasList" class="list-group"></ul>
            </div>
        </div>
    </div>
</div>

<!-- FullCalendar Script -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'es',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            buttonText: {
                today: 'Hoy',
                month: 'Mes',
                week: 'Semana',
                day: 'Día'
            },
            events: {{ eventos| safe }},
        eventClick: function (info) {
            alert(`Cita seleccionada:\n${info.event.title}\nHora: ${info.event.start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`);
        },
        });
    calendar.render();
    });



</script>

<!-- Bootstrap JS (para el modal) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.6/locales/es.js"></script>

{% endblock %}